{"version":3,"file":"backtocourse_menu_item.min.js","sources":["../src/backtocourse_menu_item.js"],"sourcesContent":["// Standard license block omitted.\n/**\n * @module     local_extend_navigation/schooladmin_menu\n * @copyright  2022 Grabs-EDV\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Fragment from 'core/fragment';\nimport Templates from 'core/templates';\nimport Notification from 'core/notification';\n\nexport const init = (title, url, contextid, active) => {\n    var mormenuselector = '#page-wrapper .navbar .primary-navigation .moremenu.navigation .navbar-nav';\n    var moremenubuttonselector = mormenuselector + ' .dropdownmoremenu';\n\n    var moremenu = document.querySelector(mormenuselector);\n    if (moremenu === null) {\n        return;\n    }\n    var drawerid = 'theme_boost-drawers-primary';\n\n    var mobilemenu = document.querySelector('#' + drawerid + ' div.drawercontent div.list-group');\n\n    var moremenuid = moremenu.getAttribute('id');\n    if (moremenuid === null) {\n        return;\n    }\n\n    var fragmentcall = 'get_html';\n    var serviceparams1 = {\n        \"function\": 'get_backtocourse_moremenu_item',\n        \"title\": title,\n        \"url\": url,\n        \"active\": active,\n    };\n\n    var fragmentpromise1 = Fragment.loadFragment('local_extend_navigation', fragmentcall, contextid, serviceparams1);\n    fragmentpromise1.then(function(html, js) {\n        var menuepartiallyhidden = !document.querySelector(moremenubuttonselector).classList.contains('d-none');\n        let backtocoursenode;\n        if (menuepartiallyhidden) {\n            // Moremenue partially hidden.\n            // So we have to insert the item into the hidden moremenue.\n            var hiddenmoremenu = document.querySelector(moremenubuttonselector + ' ul.dropdown-menu');\n            hiddenmoremenu.insertAdjacentHTML('beforeend', html);\n            backtocoursenode = document.querySelector('.backtocoursenode');\n            backtocoursenode.classList.remove('nav-link');\n            backtocoursenode.classList.add('dropdown-item');\n        } else {\n            moremenu.insertAdjacentHTML('beforeend', html);\n            backtocoursenode = document.querySelector('.backtocoursenode');\n            backtocoursenode.classList.add('nav-link');\n            backtocoursenode.classList.remove('dropdown-item');\n        }\n        if (js) {\n            Templates.runTemplateJS(js);\n        }\n        return true;\n    }).fail(Notification.exception);\n\n    var serviceparams2 = {\n        \"function\": 'get_backtocourse_mobilemenu_item',\n        \"title\": title,\n        \"url\": url,\n        \"active\": active,\n    };\n\n    var fragmentpromise2 = Fragment.loadFragment('local_extend_navigation', fragmentcall, contextid, serviceparams2);\n    fragmentpromise2.then(function(html, js) {\n        mobilemenu.insertAdjacentHTML('beforeend', html);\n        if (js) {\n            Templates.runTemplateJS(js);\n        }\n        return true;\n    }).fail(Notification.exception);\n\n};\n"],"names":["title","url","contextid","active","mormenuselector","moremenubuttonselector","moremenu","document","querySelector","mobilemenu","getAttribute","serviceparams1","Fragment","loadFragment","then","html","js","backtocoursenode","classList","contains","insertAdjacentHTML","add","remove","runTemplateJS","fail","Notification","exception","serviceparams2"],"mappings":";;;;;8OAWoB,CAACA,MAAOC,IAAKC,UAAWC,cACpCC,gBAAkB,6EAClBC,uBAAyBD,gBAAkB,qBAE3CE,SAAWC,SAASC,cAAcJ,oBACrB,OAAbE,cAKAG,WAAaF,SAASC,cAAc,oEAGrB,OADFF,SAASI,aAAa,WAMnCC,eAAiB,UACL,uCACHX,UACFC,WACGE,QAGSS,kBAASC,aAAa,0BAR1B,WAQmEX,UAAWS,gBAChFG,MAAK,SAASC,KAAMC,QAE7BC,iBADwBV,SAASC,cAAcH,wBAAwBa,UAAUC,SAAS,WAW1Fb,SAASc,mBAAmB,YAAaL,MACzCE,iBAAmBV,SAASC,cAAc,qBAC1CS,iBAAiBC,UAAUG,IAAI,YAC/BJ,iBAAiBC,UAAUI,OAAO,mBATbf,SAASC,cAAcH,uBAAyB,qBACtDe,mBAAmB,YAAaL,MAC/CE,iBAAmBV,SAASC,cAAc,qBAC1CS,iBAAiBC,UAAUI,OAAO,YAClCL,iBAAiBC,UAAUG,IAAI,yBAO/BL,uBACUO,cAAcP,KAErB,KACRQ,KAAKC,sBAAaC,eAEjBC,eAAiB,UACL,yCACH3B,UACFC,WACGE,QAGSS,kBAASC,aAAa,0BAvC1B,WAuCmEX,UAAWyB,gBAChFb,MAAK,SAASC,KAAMC,WACjCP,WAAWW,mBAAmB,YAAaL,MACvCC,uBACUO,cAAcP,KAErB,KACRQ,KAAKC,sBAAaC"}